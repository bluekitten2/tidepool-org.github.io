---
layout: defaults
title: Notes V1
published: true
---
# Notes

Notes represent textual notations that are made to add information to the data stream. They can exist merely at a point in time, or they can refer to an existing item in the data stream. That existing item can also be another note, so it is possible to construct a threaded discussion within the data stream.

Notes events are point-in-time and look like:

~~~json
{
  "type": "note",
  "subtype": "external", "device"
  "short_text": short_text_of_note,
  "text": text_of_note,
  "reference": event_to_which_this_note_refers,
  "time": see_common_fields,
  "deviceId": see_common_fields,
  "source": see_common_fields
}

The text field should be the body of the note. The short_text field should be the summary text to be displayed when there's not room to show the whole body (for example, in a tooltip). If short_text is not included or is too long to fit, then short_text is ignored and the display will be generated by truncating the text field.

Note that both the text and short_text fields will be sanitized before display. We may someday permit certain kinds of markup (for emphasis, links, etc) but for now they are not allowed.

The reference field can be either the id of a record to which the note should be attached, or the ID value of a record as retrieved from the database. The reference can be any type of record, including another note. 

The referenced record will have an indication that it is a target of at least one note. This will be a field that is added to the record called hasNote with a value of true. The existence of this flag indicates that a search for associated notes is appropriate. It could be used to show a note icon without incurring a search for the text of the note until the user demands it.